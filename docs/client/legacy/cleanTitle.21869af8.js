import{c as t,d as n,e,f as a,i as s,s as c,h as r,S as o,j as i,t as u,l as p,m as l,n as f,o as d,q as h,J as m,r as g,u as v,K as y,a as w,L as j,b,M as k,N as x,O as D}from"./client.5fb73754.js";import{d as O,t as R}from"./downloadBlob.040cc1e3.js";function N(t){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var s,c=n(t);if(a){var r=n(this).constructor;s=Reflect.construct(c,arguments,r)}else s=c.apply(this,arguments);return e(this,s)}}function S(t){var n,e,a,s;return{c:function(){n=i("button"),e=u("Download      "),this.h()},l:function(t){n=p(t,"BUTTON",{disabled:!0,title:!0,class:!0,style:!0});var a=l(n);e=f(a,"Download      "),a.forEach(d),this.h()},h:function(){n.disabled=t[0],h(n,"title","download zip file"),h(n,"class","icon svelte-1gef78k"),m(n,"background-image","url(/icons/download.svg)")},m:function(c,r){g(c,n,r),v(n,e),a||(s=y(n,"click",t[1]),a=!0)},p:function(t,e){1&w(e,1)[0]&&(n.disabled=t[0])},i:j,o:j,d:function(t){t&&d(n),a=!1,s()}}}function B(t,n,e){var a=n.data,s=n.slug,c=n.ssr,r=void 0!==c&&c,o=!1,i=[a.main].concat(b(a.components),b(a.componentComponents)).reduce((function(t,n){return t.concat(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.match(/from\s'(.+)'?/gm)||[],e=n.map((function(t){return t.replace(/(from |'|"|;)/g,"")})).filter((function(t){return!t.startsWith(".")}));return e}(n.contents))}),[]).reduce((function(t,n){return t.includes(n)||t.push(n),t}),[]);function u(){return(u=k(x.mark((function t(){var n,c,u,p,l,f,d,h;return x.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(0,o=!0),n=(new Date).getTime(),t.next=4,window.fetch("/svelte-app.json?".concat(n));case 4:return t.next=6,t.sent.json();case 6:return c=t.sent,t.next=9,window.fetch("/deps.json?".concat(n));case 9:return t.next=11,t.sent.json();case 11:u=t.sent,i.length>0&&(p=c.findIndex((function(t){return"package.json"===t.path})),l=JSON.parse(c[p].data),f={},d={},i.forEach((function(t){if("layercake"===t)d[t]=u[t];else{if("svelte"===t)return;f[t]=u[t]}u[t]||window.alert('Missing dependency, add "'.concat(t,"\" to layercake.graphic's package.json"))})),Object.assign(l.dependencies,f),Object.assign(l.devDependencies,d),c[p].data=JSON.stringify(l,null,"  ")),c.push.apply(c,b(a.components.map((function(t){return{path:"src/".concat(t.title.replace("./","")),data:t.contents}})))),c.push.apply(c,b(a.modules.map((function(t){return{path:"src/".concat(t.title.replace("./","")),data:t.contents}})))),c.push.apply(c,b(a.componentModules.map((function(t){return{path:"src/".concat(t.title.replace("../","")),data:t.contents}})))),c.push.apply(c,b(a.componentComponents.map((function(t){return{path:"src/".concat(t.title),data:t.contents}})))),c.push.apply(c,b(a.csvs.map((function(t){return{path:"src/".concat(t.title.replace("../","")),data:t.contents}})))),c.push.apply(c,b(a.jsons.map((function(t){return{path:"src/".concat(t.title.replace("../","")),data:t.contents}})))),c.push({path:"src/App.svelte",data:a.main.contents}),h=D(c.filter(Boolean),"path",!1),O(R(h),"layercake-".concat(r?"ssr-":"").concat(s,".zip")),e(0,o=!1);case 23:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t.$set=function(t){"data"in t&&e(2,a=t.data),"slug"in t&&e(3,s=t.slug),"ssr"in t&&e(4,r=t.ssr)},[o,function(){return u.apply(this,arguments)},a,s,r]}var C=function(n){t(i,o);var e=N(i);function i(t){var n;return a(this,i),n=e.call(this),s(r(n),t,B,S,c,{data:2,slug:3,ssr:4}),n}return i}();function J(t){var n=t.split("/"),e=n[n.length-1].split(".");return e.pop(),e.join(".").toLowerCase()}export{C as D,J as c};
