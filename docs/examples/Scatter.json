{"pages":[{"title":"main.js","contents":"import LayerCake from 'layercake';\nimport points from '../../data/points.js';\nimport Scatter from '../Scatter.html';\nimport Voronoi from '../Voronoi.html';\nimport AxisX from '../AxisX.html';\nimport AxisY from '../AxisY.html';\n\nconst r = 3;\nconst padding = 4;\n\nconst myCake = new LayerCake({\n  padding: { top: 0, right: 5, bottom: 20, left: 25 },\n  x: 'myX',\n  y: 'myY',\n  xPadding: [padding, padding],\n  yPadding: [padding, padding],\n  data: points,\n  target: document.getElementById('my-chart'),\n  custom: {\n    r\n  }\n})\n  .canvasLayers([\n    { component: Scatter, opts: { color: '#8a93ed' } }\n  ])\n  .svgLayers([\n    { component: AxisX, opts: {} },\n    { component: AxisY, opts: {} },\n    { component: Voronoi, opts: {} }\n  ]);\n\nmyCake.render();"},{"title":"Scatter.html","contents":"<script>\nimport { scaleCanvas } from 'LayerCake';\nexport default {\n  /* --------------------------------------------\n   * Put our canvas drawing functions inside of onstate\n   * which will change on first load and whenever\n   * the store update fires\n   */\n  onstate () {\n    const { canvas, ctx, opts } = this.get();\n    const { width, height, xGet, yGet, data, custom } = this.store.get();\n\n    /* --------------------------------------------\n     * If you were to have multiple canvas layers\n     * maybe for some artistic layering purposes\n     * put these reset functions in the first layer, not each one\n     * since they should only run once per update\n     */\n    scaleCanvas(canvas, ctx, width, height);\n    ctx.clearRect(0, 0, width, height);\n\n    /* --------------------------------------------\n     * Draw our scatterplot\n     */\n    data.forEach(d => {\n      ctx.beginPath();\n      ctx.arc(xGet(d), yGet(d), custom.r, 0, 2 * Math.PI, false);\n      ctx.fillStyle = opts.color;\n      ctx.fill();\n    });\n  }\n};\n</script>"},{"title":"Voronoi.html","contents":"{#each points as point, i}\n  <path class=\"voronoi-cell\" d={voronoi.renderCell(i)} on:mouseover=\"log(event, point)\"></path>\n{/each}\n\n<style>\n  .voronoi-cell {\n    fill: none;\n    stroke: none;\n    pointer-events: all;\n  }\n\n  .voronoi-cell:hover {\n    stroke: #000;\n  }\n</style>\n\n<script>\nimport { Delaunay } from 'd3-delaunay';\nimport * as _ from 'underscore';\n\nexport default {\n  namespace: 'svg',\n  computed: {\n    points: ({ $data, $xGet, $yGet }) => {\n      const points = _.chain($data)\n        .map(d => {\n          const point = [$xGet(d), $yGet(d)];\n          point.data = d;\n          return point;\n        })\n        .uniq(d => d.join(''))\n        .value();\n      return points;\n    },\n    voronoi: ({ $width, $height, $padding, points }) => {\n      const delaunay = Delaunay.from(points);\n      const voronoi = delaunay.voronoi([0, 0, $width, $height]);\n      return voronoi;\n    }\n  },\n  methods: {\n    log (e, point) {\n      console.log(point, point.data);\n    }\n  }\n};\n</script>"},{"title":"AxisX.html","contents":"<g class='axis x-axis'>\n  {#each ticks as tick, i}\n    <g class='tick tick-{ tick }' transform='translate({$xScale(tick)},{$yScale.range()[0]})'>\n      {#if opts.gridlines !== false}\n        <line y1='{$height * -1}' y2='0' x1='0' x2='0'></line>\n      {/if}\n      <text y='16' text-anchor='{i === 0 ? 'start' : i === ticks.length - 1 ? 'end' : 'middle'}'>{opts.formatTick ? opts.formatTick(tick) : tick}</text>\n    </g>\n  {/each}\n  {#if opts.baseline === true}\n    <line class=\"baseline\" y1='{$height - 0.5}' y2='{$height - 0.5}' x1='0' x2='{$width - 1}'></line>\n  {/if}\n</g>\n\n<style>\n  .tick {\n    font-size: .725em;\n    font-weight: 200;\n  }\n\n  line,\n  .tick line {\n    stroke: #aaa;\n    stroke-dasharray: 2;\n  }\n\n  .tick text {\n    fill: #666;\n  }\n\n  .baseline {\n    stroke-dasharray: 0;\n  }\n</style>\n\n<script>\nexport default {\n  namespace: 'svg',\n  computed: {\n    ticks: ({ $xScale, opts }) => {\n      return $xScale.ticks(opts.tickNumber);\n    }\n  }\n};\n</script>"},{"title":"AxisY.html","contents":"<g class='axis y-axis' transform='translate(-{$padding.left}, 0)'>\n  {#each $yScale.ticks(opts.tickNumber || 5) as tick, i}\n    <g class='tick tick-{tick}' transform='translate(0, {$yScale(tick)})'>\n      {#if opts.gridlines !== false}\n        <line x2='100%'></line>\n      {/if}\n      <text y='-4'>{opts.formatTick ? opts.formatTick(tick) : tick}</text>\n    </g>\n  {/each}\n</g>\n\n<style>\n  .tick {\n    font-size: .725em;\n    font-weight: 200;\n  }\n\n  .tick line {\n    stroke: #aaa;\n    stroke-dasharray: 2;\n  }\n\n  .tick text {\n    fill: #666;\n    text-anchor: start;\n  }\n\n  .tick.tick-0 line {\n    stroke-dasharray: 0;\n  }\n</style>\n\n<script>\nexport default {\n  namespace: 'svg'\n};\n</script>"},{"title":"data/points.js","contents":"export default [\n  {\n    myX: 1979,\n    myY: 7.19\n  },\n  {\n    myX: 1980,\n    myY: 7.83\n  },\n  {\n    myX: 1981,\n    myY: 7.24\n  },\n  {\n    myX: 1982,\n    myY: 7.44\n  },\n  {\n    myX: 1983,\n    myY: 7.51\n  },\n  {\n    myX: 1984,\n    myY: 7.1\n  },\n  {\n    myX: 1985,\n    myY: 6.91\n  },\n  {\n    myX: 1986,\n    myY: 7.53\n  },\n  {\n    myX: 1987,\n    myY: 7.47\n  },\n  {\n    myX: 1988,\n    myY: 7.48\n  },\n  {\n    myX: 1989,\n    myY: 7.03\n  },\n  {\n    myX: 1990,\n    myY: 6.23\n  },\n  {\n    myX: 1991,\n    myY: 6.54\n  },\n  {\n    myX: 1992,\n    myY: 7.54\n  },\n  {\n    myX: 1993,\n    myY: 6.5\n  },\n  {\n    myX: 1994,\n    myY: 7.18\n  },\n  {\n    myX: 1995,\n    myY: 6.12\n  },\n  {\n    myX: 1996,\n    myY: 7.87\n  },\n  {\n    myX: 1997,\n    myY: 6.73\n  },\n  {\n    myX: 1998,\n    myY: 6.55\n  },\n  {\n    myX: 1999,\n    myY: 6.23\n  },\n  {\n    myX: 2000,\n    myY: 6.31\n  },\n  {\n    myX: 2001,\n    myY: 6.74\n  },\n  {\n    myX: 2002,\n    myY: 5.95\n  },\n  {\n    myX: 2003,\n    myY: 6.13\n  },\n  {\n    myX: 2004,\n    myY: 6.04\n  },\n  {\n    myX: 2005,\n    myY: 5.56\n  },\n  {\n    myX: 2006,\n    myY: 5.91\n  },\n  {\n    myX: 2007,\n    myY: 4.29\n  },\n  {\n    myX: 2008,\n    myY: 4.72\n  },\n  {\n    myX: 2009,\n    myY: 5.38\n  },\n  {\n    myX: 2010,\n    myY: 4.92\n  },\n  {\n    myX: 2011,\n    myY: 4.61\n  },\n  {\n    myX: 2012,\n    myY: 3.62\n  },\n  {\n    myX: 2013,\n    myY: 5.35\n  },\n  {\n    myX: 2014,\n    myY: 5.28\n  },\n  {\n    myX: 2015,\n    myY: 4.63\n  },\n  {\n    myX: 2016,\n    myY: 4.72\n  }\n];"}],"dek":""}