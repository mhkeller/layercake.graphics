{"main":{"slug":"BeeswarmForce.svelte","contents":"<script>\n  /**\n    Generates an SVG Beeswarm chart using a [d3-force simulation](https://github.com/d3/d3-force).\n    @type {Number} [r=4] – The circle radius size in pixels.\n    @type {Number} [strokeWidth=1] – The circle's stroke width in pixels.\n    @type {String} [stroke='#fff'] – The circle's stroke color.\n    @type {Number} [xStrength=0.95] – The value passed into the `.strength` method on `forceX`. See [the documentation](https://github.com/d3/d3-force#x_strength).\n    @type {Number} [yStrength=0.075] – The value passed into the `.strength` method on `forceY`. See [the documentation](https://github.com/d3/d3-force#y_strength).\n  */\n  import { getContext } from 'svelte';\n  import { forceSimulation, forceX, forceY, forceCollide } from 'd3-force';\n\n  const { data, xGet, height, zGet, custom } = getContext('LayerCake');\n\n  const nodes = $data.map((d) => ({ ...d }));\n\n  export let r = 4;\n  export let strokeWidth = 1;\n  export let stroke = '#fff';\n  export let xStrength = 0.95;\n  export let yStrength = 0.075;\n\n  $: simulation = forceSimulation(nodes)\n    .force('x', forceX().x(d => $xGet(d)).strength(xStrength))\n    .force('y', forceY().y($height / 2).strength(yStrength))\n    .force('collide', forceCollide(r))\n    .stop();\n\n  $: {\n    for ( var i = 0,\n      n = Math.ceil(Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay()));\n      i < n;\n      ++i ) {\n      simulation.tick();\n    }\n  }\n</script>\n\n<g class='bee-group'>\n  {#each simulation.nodes() as node}\n    <circle\n      fill='{$zGet(node)}'\n      stroke='{stroke}'\n      stroke-width='{strokeWidth}'\n      cx='{node.x}'\n      cy='{node.y}'\n      r='{r}'\n    >\n      <title>{$custom.getTitle(node)}</title>\n    </circle>\n  {/each}\n</g>"},"dek":"","usedIn":[{"group":"Regular","matches":["/example/BeeswarmForce"]},{"group":"SSR","matches":[]}],"jsdocParsed":{"description":"Generates an SVG Beeswarm chart using a [d3-force simulation](https://github.com/d3/d3-force).","tags":[{"title":"type","description":"[r=4] – The circle radius size in pixels.","type":{"type":"NameExpression","name":"Number"}},{"title":"type","description":"[strokeWidth=1] – The circle's stroke width in pixels.","type":{"type":"NameExpression","name":"Number"}},{"title":"type","description":"[stroke='#fff'] – The circle's stroke color.","type":{"type":"NameExpression","name":"String"}},{"title":"type","description":"[xStrength=0.95] – The value passed into the `.strength` method on `forceX`. See [the documentation](https://github.com/d3/d3-force#x_strength).","type":{"type":"NameExpression","name":"Number"}},{"title":"type","description":"[yStrength=0.075] – The value passed into the `.strength` method on `forceY`. See [the documentation](https://github.com/d3/d3-force#y_strength).","type":{"type":"NameExpression","name":"Number"}}]}}